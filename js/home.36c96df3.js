(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{"0a0d":function(t,n,e){t.exports=e("e829")},"0bfb":function(t,n,e){"use strict";var o=e("cb7c");t.exports=function(){var t=o(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},"1aa4":function(t,n,e){"use strict";var o=e("e4a6"),r=e.n(o);r.a},"2a0a":function(t,n,e){"use strict";e.r(n);var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"page-home"}},[t.loading?e("div",{staticClass:"page-msg",attrs:{id:"page-loading"}},[e("div",{staticClass:"page-msg-body"},[e("fa-icon",{staticClass:"loading",attrs:{icon:"spinner"}}),e("div",{staticClass:"msg-text"},[t._v("加载中...")])],1)]):[t.error?e("div",{staticClass:"page-msg",attrs:{id:"page-error"}},[e("div",{staticClass:"page-msg-body"},[e("fa-icon",{staticClass:"danger",attrs:{icon:"exclamation-triangle"}}),e("div",{staticClass:"danger msg-text"},[t._v("获取笔记列表失败")])],1)]):t.notes.length?e("div",{attrs:{id:"page-note-list"}},t._l(t.notes,function(n){return e("note",t._b({key:n.id},"note",n,!1))}),1):e("div",{staticClass:"page-msg",attrs:{id:"page-note"}},[e("div",{staticClass:"page-msg-body"},[e("fa-icon",{staticClass:"normal",attrs:{icon:"exclamation-triangle"}}),e("div",{staticClass:"normal msg-text"},[t._v("笔记列表为空，点击“+”添加新的笔记")])],1)])],e("button",{staticClass:"btn btn-circle btn-plus",class:{in:t.btnIn},attrs:{role:"button",type:"button"},on:{click:t.handleJNew}},[e("fa-icon",{attrs:{icon:"plus"}})],1)],2)},r=[],a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"note",on:{click:t.handleJEdit}},[e("div",{staticClass:"note-title"},[e("h4",[t._v(t._s(t.title||"无标题"))])]),e("div",{staticClass:"note-content"},[t._v("\n    "+t._s(t.scontent||"无内容")+"\n  ")]),e("div",{staticClass:"note-footer"},[e("div",{staticClass:"note-createat"},[t._v("\n      创建于 "+t._s(t.screateAt)+"\n    ")]),e("div",{staticClass:"note-updateat"},[t._v("\n      更新于 "+t._s(t.supdateAt)+"\n    ")])])])},i=[],c=(e("c5f6"),e("6b54"),864e5),s=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",o=t.toString(),r=n-o.length;while(r>0)o=e+o,r--;return o},u={name:"Note",props:{id:{type:Number,default:-1},title:{type:String,default:"无标题"},content:{type:String,default:"无内容"},createAt:{type:Number,default:0},updateAt:{type:Number,default:0}},computed:{scontent:function(){return this.content.slice(0,100)},screateAt:function(){return this.tFormat(this.createAt)},supdateAt:function(){return this.tFormat(this.updateAt)}},methods:{tFormat:function(t){var n=new Date(t),e=new Date,o=e.getTime()-n.getTime();e.setHours(0,0,0,0);var r=e.getTime();return o>=r-2*c?"".concat((o/c).toFixed(0),"天前"):o>=r-c?"前天":o>=r?"昨天":"".concat(s(n.getHours(),2,"0"),":").concat(s(n.getMinutes(),2,"0"),":").concat(s(n.getSeconds(),2,"0"))},handleJEdit:function(){this.$router.push("/note/-/".concat(this.id))}}},d=u,l=(e("59f0"),e("2877")),f=Object(l["a"])(d,a,i,!1,null,"0e650e83",null),g=f.exports,v=e("8149"),p={name:"Home",components:{Note:g},data:function(){return{btnIn:!1,loading:!0,error:!1,notes:[]}},mounted:function(){var t=this,n=setTimeout(function(){clearTimeout(n),t.btnIn=!0,t.fetchAllNotes()},0)},methods:{handleJNew:function(){var t=this;Object(v["d"])().then(function(n){t.btnIn=!1;var e=n.target.result,o=setTimeout(function(){clearTimeout(o),t.$router.push("/note/-/".concat(e))},250)}).catch(function(){t.$msg({type:"danger",message:"新建笔记失败！",duration:800})})},fetchAllNotes:function(){var t=this;Object(v["b"])().then(function(n){t.loading=!1,t.notes=n.reverse()}).catch(function(){t.loading=!1,t.error=!0,t.$msg({type:"danger",message:"获取笔记列表失败！",duration:800})})}}},b=p,m=(e("1aa4"),Object(l["a"])(b,o,r,!1,null,"534e0c69",null));n["default"]=m.exports},"2f37":function(t,n,e){var o=e("63b6");o(o.S,"Date",{now:function(){return(new Date).getTime()}})},3846:function(t,n,e){e("9e1e")&&"g"!=/./g.flags&&e("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:e("0bfb")})},"59f0":function(t,n,e){"use strict";var o=e("aa2a"),r=e.n(o);r.a},"6b54":function(t,n,e){"use strict";e("3846");var o=e("cb7c"),r=e("0bfb"),a=e("9e1e"),i="toString",c=/./[i],s=function(t){e("2aba")(RegExp.prototype,i,t,!0)};e("79e5")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?s(function(){var t=o(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?r.call(t):void 0)}):c.name!=i&&s(function(){return c.call(this)})},8149:function(t,n,e){"use strict";var o="notebook-h5",r="notes",a=1,i=e("0a0d"),c=e.n(i),s=e("795b"),u=e.n(s),d=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return new u.a(function(e,i){var c=window.indexedDB.open(o,a);c.onsuccess=function(o){var a=o.target.result,c=a.transaction([r],"readwrite"),s=c.objectStore(r),u=s.index(n),d=u.get(t);d.onsuccess=function(t){e(t.target.result)},d.onerror=function(t){i(t)}},c.onerror=function(t){i(t)}})},l=function(t){return new u.a(function(n,e){var i=window.indexedDB.open(o,a);i.onsuccess=function(o){var a=o.target.result,i=a.transaction([r],"readwrite"),c=i.objectStore(r),s=c.add(t);s.onsuccess=function(t){n(t)},s.onerror=function(t){e(t)}},i.onerror=function(t){e(t)}})},f=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return new u.a(function(i,c){var s=window.indexedDB.open(o,a);s.onsuccess=function(o){var a=o.target.result,s=a.transaction([r],"readwrite"),u=s.objectStore(r),d=u.index(e),l=d.get(t);l.onsuccess=function(t){var e=t.target.result;for(var o in n)e.hasOwnProperty(o)&&(e[o]=n[o]);var r=u.put(e);r.onerror=function(t){c(t)},r.onsuccess=function(t){i(t)}},l.onerror=function(t){c(t)}},s.onerror=function(t){c(t)}})},g=function(t){return new u.a(function(n,e){var i=window.indexedDB.open(o,a);i.onsuccess=function(o){var a=o.target.result,i=a.transaction([r],"readwrite"),c=i.objectStore(r),s=c.delete(t);s.onsuccess=function(t){n(t)},s.onerror=function(t){e(t)}},i.onerror=function(t){e(t)}})},v=function(){return new u.a(function(t,n){var e=window.indexedDB.open(o,a);e.onsuccess=function(e){var o=e.target.result,a=o.transaction([r],"readwrite"),i=a.objectStore(r),c=i.openCursor(),s=[];c.onsuccess=function(n){var e=n.target.result;e?(s.push(e.value),e.continue()):t(s)},c.onerror=function(t){n(t)}},e.onerror=function(t){n(t)}})},p=function(){var t=c()();return l({title:"",content:"",createAt:t,updateAt:t})},b=function(t){return d(t)},m=function(){return v()},h=function(t,n){return f(t,n)},w=function(t){return g(t)};e.d(n,"d",function(){return p}),e.d(n,"c",function(){return b}),e.d(n,"b",function(){return m}),e.d(n,"e",function(){return h}),e.d(n,"a",function(){return w});var x=window.indexedDB.open(o,a);x.onupgradeneeded=function(t){var n=t.target.result,e=n.createObjectStore(r,{keyPath:"id",autoIncrement:!0});e.createIndex("id","id",{unique:!0}),e.createIndex("title","title",{unique:!1})},x.onerror=function(){console.log("Why didn't you allow my web app to use IndexedDB?!")}},aa2a:function(t,n,e){},e4a6:function(t,n,e){},e829:function(t,n,e){e("2f37"),t.exports=e("584a").Date.now}}]);