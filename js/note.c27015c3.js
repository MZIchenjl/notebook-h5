(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["note"],{"0a0d":function(n,t,e){n.exports=e("e829")},"14e0":function(n,t,e){var o=e("63b6"),r=e("5d6b");o(o.S+o.F*(Number.parseInt!=r),"Number",{parseInt:r})},"2f37":function(n,t,e){var o=e("63b6");o(o.S,"Date",{now:function(){return(new Date).getTime()}})},"3a3d":function(n,t,e){e("14e0"),n.exports=e("584a").Number.parseInt},"4f93":function(n,t,e){},"5d6b":function(n,t,e){var o=e("e53d").parseInt,r=e("a1ce").trim,i=e("e692"),a=/^[-+]?0[xX]/;n.exports=8!==o(i+"08")||22!==o(i+"0x16")?function(n,t){var e=r(String(n),3);return o(e,t>>>0||(a.test(e)?16:10))}:o},"70f1":function(n,t,e){n.exports=e("3a3d")},"75cf":function(n,t,e){"use strict";var o=e("4f93"),r=e.n(o);r.a},8149:function(n,t,e){"use strict";var o="notebook-h5",r="notes",i=1,a=e("0a0d"),c=e.n(a),u=e("795b"),s=e.n(u),d=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return new s.a(function(e,a){var c=window.indexedDB.open(o,i);c.onsuccess=function(o){var i=o.target.result,c=i.transaction([r],"readwrite"),u=c.objectStore(r),s=u.index(t),d=s.get(n);d.onsuccess=function(n){e(n.target.result)},d.onerror=function(n){a(n)}},c.onerror=function(n){a(n)}})},f=function(n){return new s.a(function(t,e){var a=window.indexedDB.open(o,i);a.onsuccess=function(o){var i=o.target.result,a=i.transaction([r],"readwrite"),c=a.objectStore(r),u=c.add(n);u.onsuccess=function(n){t(n)},u.onerror=function(n){e(n)}},a.onerror=function(n){e(n)}})},l=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return new s.a(function(a,c){var u=window.indexedDB.open(o,i);u.onsuccess=function(o){var i=o.target.result,u=i.transaction([r],"readwrite"),s=u.objectStore(r),d=s.index(e),f=d.get(n);f.onsuccess=function(n){var e=n.target.result;for(var o in t)e.hasOwnProperty(o)&&(e[o]=t[o]);var r=s.put(e);r.onerror=function(n){c(n)},r.onsuccess=function(n){a(n)}},f.onerror=function(n){c(n)}},u.onerror=function(n){c(n)}})},m=function(n){return new s.a(function(t,e){var a=window.indexedDB.open(o,i);a.onsuccess=function(o){var i=o.target.result,a=i.transaction([r],"readwrite"),c=a.objectStore(r),u=c.delete(n);u.onsuccess=function(n){t(n)},u.onerror=function(n){e(n)}},a.onerror=function(n){e(n)}})},p=function(){return new s.a(function(n,t){var e=window.indexedDB.open(o,i);e.onsuccess=function(e){var o=e.target.result,i=o.transaction([r],"readwrite"),a=i.objectStore(r),c=a.openCursor(),u=[];c.onsuccess=function(t){var e=t.target.result;e?(u.push(e.value),e.continue()):n(u)},c.onerror=function(n){t(n)}},e.onerror=function(n){t(n)}})},v=function(){var n=c()();return f({title:"",content:"",createAt:n,updateAt:n})},h=function(n){return d(n)},g=function(){return p()},b=function(n,t){return l(n,t)},w=function(n){return m(n)};e.d(t,"d",function(){return v}),e.d(t,"c",function(){return h}),e.d(t,"b",function(){return g}),e.d(t,"e",function(){return b}),e.d(t,"a",function(){return w});var x=window.indexedDB.open(o,i);x.onupgradeneeded=function(n){var t=n.target.result,e=t.createObjectStore(r,{keyPath:"id",autoIncrement:!0});e.createIndex("id","id",{unique:!0}),e.createIndex("title","title",{unique:!1})},x.onerror=function(){console.log("Why didn't you allow my web app to use IndexedDB?!")}},"958d":function(n,t,e){"use strict";e.r(t);var o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{attrs:{id:"page-note"}},[e("div",{staticClass:"note-container"},[e("div",{staticClass:"note-title"},[e("input",{directives:[{name:"model",rawName:"v-model",value:n.title,expression:"title"}],staticClass:"note-title-input",attrs:{type:"text",placeholder:"无标题"},domProps:{value:n.title},on:{input:[function(t){t.target.composing||(n.title=t.target.value)},function(t){n.mod=!0}]}})]),e("div",{staticClass:"note-content"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:n.content,expression:"content"}],staticClass:"note-content-textarea",attrs:{placeholder:"请输入想记录的文字"},domProps:{value:n.content},on:{input:[function(t){t.target.composing||(n.content=t.target.value)},function(t){n.mod=!0}]}})]),e("div",{staticClass:"btn-group btn-ops",class:{in:n.menuIn}},[e("transition",{attrs:{name:"fade-btn"}},[n.menuNIn?e("span",{staticClass:"btn btn-back",attrs:{role:"button"},on:{click:n.goBack}},[e("fa-icon",{attrs:{icon:"chevron-left"}})],1):n._e()]),e("transition",{attrs:{name:"fade-btn"}},[n.menuNIn?e("span",{staticClass:"btn btn-save",attrs:{role:"button"},on:{click:n.handleUpdateNote}},[e("fa-icon",{attrs:{icon:"check"}})],1):n._e()]),e("transition",{attrs:{name:"fade-btn"}},[n.menuNIn?e("span",{staticClass:"btn btn-del",attrs:{role:"button"},on:{click:n.handleDeleteNote}},[e("fa-icon",{attrs:{icon:"trash"}})],1):n._e()]),e("span",{staticClass:"btn btn-menu",class:{close:n.menuNIn,open:!n.menuNIn},attrs:{role:"button"},on:{click:n.handleMenuToggle}})],1)])])},r=[],i=e("0a0d"),a=e.n(i),c=e("70f1"),u=e.n(c),s=e("8149"),d={name:"Note",created:function(){var n=this,t=u()(this.$route.params["id"]||"-1");this.id=t,Object(s["c"])(t).then(function(t){n.title=t.title,n.content=t.content}).catch(function(t){n.$msg({type:"danger",message:"读取笔记失败！",duration:800,onClose:function(){n.goBack()}})})},mounted:function(){var n=this,t=setTimeout(function(){clearTimeout(t),n.menuIn=!0},0)},data:function(){return{id:-1,title:"",content:"",mod:!1,menuIn:!1,menuNIn:!1}},computed:{isNew:function(){return-1===this.id}},methods:{back:function(){var n=this;this.menuNIn=!1;var t=setTimeout(function(){clearTimeout(t),n.$router.back()},250)},goBack:function(){var n=this;this.mod?(this.menuNIn=!1,this.$confirm("笔记未保存，需要保存？").then(function(){n.handleUpdateNote().then(function(){n.back()})}).catch(function(){n.back()})):this.back()},handleMenuToggle:function(){this.menuNIn=!this.menuNIn},handleUpdateNote:function(){var n=this;this.menuNIn=!1;var t=this.title,e=this.content;return Object(s["e"])(this.id,{title:t,content:e,updateAt:a()()}).then(function(t){n.mod=!1,n.$msg({type:"success",message:"保存笔记成功！",duration:800})}).catch(function(t){n.$msg({type:"danger",message:"保存笔记失败！",duration:800})})},handleDeleteNote:function(){var n=this;this.mod=!1,this.menuNIn=!1,this.$confirm("确定删除此篇笔记？").then(function(){Object(s["a"])(n.id).then(function(t){n.$msg({type:"success",message:"删除笔记成功！",duration:800,onClose:function(){n.goBack()}})}).catch(function(t){n.$msg({type:"danger",message:"删除笔记失败！",duration:800})})}).catch(function(){})}}},f=d,l=(e("75cf"),e("2877")),m=Object(l["a"])(f,o,r,!1,null,"5a0361b7",null);t["default"]=m.exports},a1ce:function(n,t,e){var o=e("63b6"),r=e("25eb"),i=e("294c"),a=e("e692"),c="["+a+"]",u="​",s=RegExp("^"+c+c+"*"),d=RegExp(c+c+"*$"),f=function(n,t,e){var r={},c=i(function(){return!!a[n]()||u[n]()!=u}),s=r[n]=c?t(l):a[n];e&&(r[e]=s),o(o.P+o.F*c,"String",r)},l=f.trim=function(n,t){return n=String(r(n)),1&t&&(n=n.replace(s,"")),2&t&&(n=n.replace(d,"")),n};n.exports=f},e692:function(n,t){n.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e829:function(n,t,e){e("2f37"),n.exports=e("584a").Date.now}}]);
//# sourceMappingURL=note.c27015c3.js.map